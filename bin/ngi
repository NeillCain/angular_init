#!/usr/bin/env ruby

# angular_init (short-name: ngi)
# Copyright 2015 Joshua Beam
# github.com/joshbeam/angular_init
# MIT License

#   STRUCTURE

# 	module AngularInit
# 		class Manager
#			class Generator
#           	# create the template
#			end
#
# 			def run
#				# decides whether to configure, generate, etc.
#			end
#
# 			class Configure
#
# 			end
# 		end
# 	end

require File.dirname(__FILE__)+'/../src/ruby/angular_init/angular_init'

ARGS_SIZE = ARGV.size
CONFIG = AngularInit::Manager::Configure.new.from_json
COMMANDS = AngularInit::Commands.new(:valid_inputs => CONFIG['global']['commands'].collect{ |k,v| v })
MENUS = AngularInit::Menus.new(:valid_inputs => CONFIG['global']['menus'].collect{ |k,v| v })

args = {}

if ARGS_SIZE > 0
	if ARGS_SIZE == 2
		if COMMANDS.valid?(ARGV[0])
			args[:command] = ARGV[0]
			args[:type] = ARGV[1]
		else
			# show error and help menu
		end
	end

	if ARGS_SIZE == 1
		if MENUS.valid?(ARGV[0])
			args[:menu] = ARGV[0]
		else
			# show error and help menu
		end
	end

	args[:config] = CONFIG
	args[:commands] = COMMANDS
	args[:menus] = MENUS

	AngularInit::Manager.run(args)
end